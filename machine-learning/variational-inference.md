###变分
#### 什么是泛函
是一种定义域为函数，值域为实数的函数。换言之， 就是从函数组成的一个向量空间到实数的一个映射。
#### 什么是变分法
- 是处理泛函的数学领域
- 和处理函数的普通微积分相对
- 最终寻求的是极值函数：这些函数使得泛函取得最大或最小值。

#### 变分法中的泛函
- 泛函表示
$$I(y) = \int_{x_1}^{x_2}Fdx$$，其中我们想要通过选择F来最大化或最小化泛函I的值。其中F为拉格朗日函数。

#### 最简单的例子
- 在二维坐标中，求两个固定点之间的最短路径。记此段路径为ds.
- $$ds^2 = dx^2 + dy^2 = [1+y'^2]dx^2$$ 
- $$L = \int_{x_1}^{x_2}ds =\int_{x_1}^{x_2}\sqrt{1+y'^2}dx$$
- 在此例子中L是泛函。$$\sqrt{1+y'^2}$$是拉格朗日函数。我们的目标是找到一个$$y'$$使用L值最小。

#### 泛函的极值
- L的在区间$$[x_1, x_2]上的极值取决于路径的选择， 即y(x)$$
- 我们有理由假设存在这样的函数y(x), 使得L取得极值， 且y(x)附近的任意路径我们记为$$\tilde{y}(x)$$. 同时假设y(x)两阶可微，通过引入一个微小量$$\epsilon \ll 1 $$ 和一个任意可微函数$$\eta(x), 我们可以用y(x)来表示\tilde{y}(x)$$ <br/>
 $$\tilde{y}(x) = y(x) + \epsilon \eta(x)$$ . <br/>
 $$ 这样做的好处是给定一个\eta(x), 我们可以通过调整\epsilon来获取无穷多的路径，同时对于任意的\eta(x), 当\epsilon=0时， \tilde{y}(x) = y(x)$$
- $$\tilde{L} = \int_{x_1}^{x_2}F(y+\epsilon \eta, \tilde{y}+\epsilon \tilde{\eta}; x)$$
- 根据之前的合理假设， y(x)是一个固定的函数，对于上式， 对于给定的$$\eta(x)$$, 则$$\tilde{L}$$取决于$$\epsilon$$,  现将$$\tilde{L}$$在$$\epsilon = 0$$处进行泰勒展开：
 $$\tilde{L}(\epsilon) = \tilde{L}|_{\epsilon = 0} + \frac{d\tilde{L}}{d\epsilon}.\epsilon + \frac{d^2\tilde{L}}{d^2\epsilon}.\frac{\epsilon^2}{2!} + ... = \tilde{L_{0}} + \tilde{L}_1\epsilon + \tilde{L}_2\epsilon^2+...  $$.  
- 当$$\epsilon=0$$时， $$\tilde{L_{0}} = L$$, 代入上式： <br/>
 $$\tilde{L} - L = \tilde{L}_1\epsilon + \tilde{L}_2\epsilon^2+... $$ <br/>
 这里我们记： $$\delta L = \tilde{L}_1\epsilon = \frac{d\tilde{L}}{d\epsilon}|_{\epsilon=0}.\epsilon   $$ 为一阶变分， $$\delta L^2 = \tilde{L}_2\epsilon^2 为二阶变分 $$ <br/>
- 变分与微分的区别： 变分是上面例子中的解释是：y和$$\tilde{y}的差值，即在y轴方向上的，即同一个x, 而微分是由于x的微小变动引起的y的变动的大小$$ 

### 变分推断
- 在贝叶斯推断和机器学习领域用于近似计算复杂积分的一族方法。多用于包含观察变量、未知参数与隐变量的复杂统计模型中。

### 背景
- 概率模型应用中的核心问题：在给定观察变量X的前提下，计算潜在变量Z的后验概率分布P(Z|X), 以及该分布的期望。
- 直接后验概率分布或者期望是不可行的： 潜在空间的维度太高、后验概率分布的形式过于复杂。连续变量可能高维，没有解析解，或者分布太过复杂。 离散变量高维不便求解边缘分布
- 在这种情况下，只能采用近似的方法： 随机近似或确定近似。 MCMC属于随机近似，无限多的资源，精确的结果。 变分推断或变分贝叶斯属于确定近似， 永远无法得到精确的结果，但可用于大规模数据。

### 起源
- 微积分关注的是函数的导数， 将函数看作一个映射，以变量的值作为输入，返回函数值作为输出。将泛函看作一个映射，以一个函数作为输入， 返回泛函的值作为输出。 
- 熵的定义, 以概率分布为输入，返回下面的量： $$H[p] = - \int p(x)lnp(x)dx$$
- 泛函的导数： 输入的函数发生微小变化时， 泛函的值的变化情况。




